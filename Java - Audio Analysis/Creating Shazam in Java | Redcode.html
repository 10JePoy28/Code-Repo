<!DOCTYPE html>
<html dir="ltr" lang="en-US"><head><link rel="stylesheet" type="text/css" href="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/01586438.css" media="all"><script src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/recipe.js" async="" type="text/javascript"></script><script src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/ga.js" async="" type="text/javascript"></script><script src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/ga.js" async="" type="text/javascript"></script><script type="text/javascript" src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/266fde3c.js"></script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Creating Shazam in Java | Redcode</title><link rel="shortcut icon" href="http://www.redcode.nl/blog/wp-content/uploads/2011/05/favicon.png" type="image/x-icon"><link rel="profile" href="http://gmpg.org/xfn/11"><link rel="alternate" type="application/rss+xml" title="Redcode » Feed" href="http://www.redcode.nl/feed/"><link rel="alternate" type="application/rss+xml" title="Redcode » Comments Feed" href="http://www.redcode.nl/comments/feed/"><script type="text/javascript">var _gaq=_gaq||[];_gaq.push(['_setAccount','UA-3219266-1']);_gaq.push(['_trackPageview']);(function(){var ga=document.createElement('script');ga.type='text/javascript';ga.async=true;ga.src=('https:'==document.location.protocol?'https://ssl':'http://www')+'.google-analytics.com/ga.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ga,s);})();</script><link rel="alternate" type="application/rss+xml" title="Redcode » Creating Shazam in Java Comments Feed" href="http://www.redcode.nl/blog/2010/06/creating-shazam-in-java/feed/"><!--[if IE 7]><link rel='stylesheet' id='ie7-style-css'  href='http://www.redcode.nl/blog/wp-content/themes/platform/css/ie7.css?ver=1.4.2' type='text/css' media='all' /> <![endif]--><script type="text/javascript">var SHRSB_Globals={"src":"http:\/\/www.redcode.nl\/blog\/wp-content\/uploads\/shareaholic\/spritegen","perfoption":"1","twitter_template":"%24%7Btitle%7D+-+%24%7Bshort_link%7D+via+%40royvanrijn","locale":"0","shortener":"google","shortener_key":"","pubGaSocial":"0","pubGaKey":""};</script><link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.redcode.nl/blog/xmlrpc.php?rsd"><link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.redcode.nl/blog/wp-includes/wlwmanifest.xml"><link rel="prev" title="Playing around with HTML 5" href="http://www.redcode.nl/blog/2010/04/playing-around-with-html-5/"><link rel="next" title="Music Matching (part deux)" href="http://www.redcode.nl/blog/2010/06/music-matching-part-deux/"><meta name="generator" content="WordPress 3.4.1"><link rel="canonical" href="http://www.redcode.nl/blog/2010/06/creating-shazam-in-java/"><link rel="shortlink" href="http://www.redcode.nl/?p=391"><script type="text/javascript">SyntaxHighlighter.config.clipboardSwf='http://www.redcode.nl/blog/wp-content/plugins/syntax-highlighter-and-code-prettifier/scripts/clipboard.swf';SyntaxHighlighter.all();</script><style type="text/css" id="dynamic-css">@import url(http://fonts.googleapis.com/css?family=Droid+Sans:regular,bold);h1,h2,h3,h4,h5,h6,.site-title{font-family:"Droid Sans","Lucida Grande",Tahoma,sans-serif;letter-spacing:0.00em;text-transform:none;font-weight:normal;font-variant:normal;font-style:normal}body,.font1,.font-primary,.commentlist{font-family:Calibri,"Helvetica Neue",Helvetica,Arial,Verdana,sans-serif;letter-spacing:0.00em;text-transform:none;font-weight:normal;font-variant:normal;font-style:normal}.font2, .font-sub, ul.main-nav li a, #secondnav li a, .metabar, .subtext, .subhead, .widget-title, .post-comments, .reply a, .editpage, #pagination .wp-pagenavi, .post-edit-link, #wp-calendar caption, #wp-calendar thead th, .soapbox-links a, .fancybox, .standard-form .admin-links, #featurenav a, .pagelines-blink, .ftitle
small{font-family:"Droid Sans","Lucida Grande",Tahoma,sans-serif;letter-spacing:0.20em;text-transform:uppercase;font-weight:normal;font-style:normal}.fixed_width #page, .fixed_width #footer, .canvas #page-canvas{width:1232px}#page-main
.content{width:1214px}#site{min-width:1214px}#site .content, .wcontent, #primary-nav ul.main-nav.nosearch{width:1212px}#primary-nav ul.main-nav{width:992px}.fullwidth #pagelines_content #column-main, .fullwidth .wmain, .fullwidth #buddypress-page
#container{width:960px}.fullwidth #pagelines_content #sidebar1, .fullwidth #buddypress-page
#sidebar1{width:0px}.fullwidth #pagelines_content #sidebar2, .fullwidth #buddypress-page
#sidebar2{width:252px}.fullwidth #pagelines_content #column-wrap, .fullwidth #buddypress-page
#container{width:960px}.fullwidth #pagelines_content #sidebar-wrap, .fullwidth #buddypress-page #sidebar-wrap{width:0px}.one-sidebar-right #pagelines_content #column-main, .one-sidebar-right .wmain, .one-sidebar-right #buddypress-page
#container{width:956px}.one-sidebar-right #pagelines_content #sidebar1, .one-sidebar-right #buddypress-page
#sidebar1{width:256px}.one-sidebar-right #pagelines_content #sidebar2, .one-sidebar-right #buddypress-page
#sidebar2{width:0px}.one-sidebar-right #pagelines_content #column-wrap, .one-sidebar-right #buddypress-page
#container{width:956px}.one-sidebar-right #pagelines_content #sidebar-wrap, .one-sidebar-right #buddypress-page #sidebar-wrap{width:256px}.one-sidebar-left #pagelines_content #column-main, .one-sidebar-left .wmain, .one-sidebar-left #buddypress-page
#container{width:1012px}.one-sidebar-left #pagelines_content #sidebar1, .one-sidebar-left #buddypress-page
#sidebar1{width:200px}.one-sidebar-left #pagelines_content #sidebar2, .one-sidebar-left #buddypress-page
#sidebar2{width:0px}.one-sidebar-left #pagelines_content #column-wrap, .one-sidebar-left #buddypress-page
#container{width:1012px}.one-sidebar-left #pagelines_content #sidebar-wrap, .one-sidebar-left #buddypress-page #sidebar-wrap{width:200px}.two-sidebar-right #pagelines_content #column-main, .two-sidebar-right .wmain, .two-sidebar-right #buddypress-page
#container{width:760px}.two-sidebar-right #pagelines_content #sidebar1, .two-sidebar-right #buddypress-page
#sidebar1{width:258px}.two-sidebar-right #pagelines_content #sidebar2, .two-sidebar-right #buddypress-page
#sidebar2{width:194px}.two-sidebar-right #pagelines_content #column-wrap, .two-sidebar-right #buddypress-page
#container{width:760px}.two-sidebar-right #pagelines_content #sidebar-wrap, .two-sidebar-right #buddypress-page #sidebar-wrap{width:452px}.two-sidebar-left #pagelines_content #column-main, .two-sidebar-left .wmain, .two-sidebar-left #buddypress-page
#container{width:800px}.two-sidebar-left #pagelines_content #sidebar1, .two-sidebar-left #buddypress-page
#sidebar1{width:240px}.two-sidebar-left #pagelines_content #sidebar2, .two-sidebar-left #buddypress-page
#sidebar2{width:172px}.two-sidebar-left #pagelines_content #column-wrap, .two-sidebar-left #buddypress-page
#container{width:800px}.two-sidebar-left #pagelines_content #sidebar-wrap, .two-sidebar-left #buddypress-page #sidebar-wrap{width:412px}.two-sidebar-center #pagelines_content #column-main, .two-sidebar-center .wmain, .two-sidebar-center #buddypress-page
#container{width:758px}.two-sidebar-center #pagelines_content #sidebar1, .two-sidebar-center #buddypress-page
#sidebar1{width:258px}.two-sidebar-center #pagelines_content #sidebar2, .two-sidebar-center #buddypress-page
#sidebar2{width:196px}.two-sidebar-center #pagelines_content #column-wrap, .two-sidebar-center #buddypress-page
#container{width:1016px}.two-sidebar-center #pagelines_content #sidebar-wrap, .two-sidebar-center #buddypress-page #sidebar-wrap{width:196px}.dcol_container_2{width:1232px;float:right}.dcol_2{width:596px;margin-left:20px}.dcol_container_3{width:1232px;float:right}.dcol_3{width:390px;margin-left:20px}.dcol_container_4{width:1232px;float:right}.dcol_4{width:288px;margin-left:20px}.dcol_container_5{width:1230px;float:right}.dcol_5{width:226px;margin-left:20px}body,body.fixed_width{background-color:#000}body #page, .sf-menu li, #primary-nav ul.sf-menu a:focus, .sf-menu a:hover, .sf-menu a:active, .commentlist ul.children .even, .alt #commentform
textarea{background-color:#fff}hr, .fpost, .clip_box, .widget-title, #buddypress-page .item-list li, .metabar a, #morefoot .widget-title, #site #dsq-content h3, .post.fpost .entry, #soapbox .fboxinfo,  #primary-nav #nav_row,.fpost.sticky{border-color:#9fb7e0}h1, h2, h3, h4, h5, h6, h1 a, h2 a, h3 a, h4 a, h5 a, h6 a, a.site-title, .entry-title a, .entry-title a:hover, .widget-title a:hover, h3.widget-title a:hover{color:#000}#page, .tcolor1, #subnav ul li a:active, .commentlist cite a, #breadcrumb a, .metabar a:hover, .post-nav a:hover, .post-footer a, #buddypress-page #object-nav ul li a, #buddypress-page table.forum .td-title a, #buddypress-page #subnav a:hover, #buddypress-page #subnav li.current a, #twitterbar a, #carousel .carousel_text, #site #dsq-content .dsq-request-user-info td a, #pagination .wp-pagenavi a:hover, #pagination .wp-pagenavi .current, #featurenav a.activeSlide, .content-pagination a:hover .cp-num{color:#000}.tcolor2, .lcolor2 a, .subhead, .widget-title,  .post-edit-link, .metabar .sword, #branding .site-description, #callout, #commentform .required, #postauthor .subtext, #buddypress-page .standard-form .admin-links, #wp-calendar caption, #carousel .thecarousel, #pagination .wp-pagenavi span.pages, .commentlist .comment-meta  a,  #highlight .highlight-subhead, .content-pagination span, .content-pagination a .cp-num, .searchform
.searchfield{color:#5c5c5c}.tcolor3, .lcolor3 a, .main_nav li a,  .widget-title a, h3.widget-title a, #subnav_row li a, .metabar em, .metabar a, .tags, #commentform label, .form-allowed-tags code, .rss-date, #breadcrumb, .reply a, .post-nav a, .post-nav a:visited, .post-footer, .auxilary a, #buddypress-page .standard-form .admin-links a, #twitterbar .content .tbubble, .widget ul.twitter .twitter-item, .cform .emailreqtxt,.cform .reqtxt, #pagination .wp-pagenavi a, #pagination .wp-pagenavi .current, #pagination .wp-pagenavi .extend, .main_nav ul.sf-menu a, .sf-menu a:visited, #featurenav a, #feature-footer
span.playpause{color:#2e2e2e}a, #subnav_row li.current_page_item a, #subnav_row li a:hover, #grandchildnav .current_page_item > a, .branding h1 a:hover, .post-comments a:hover, .bbcrumb a:hover, 	#feature_slider .fcontent.fstyle-lightbg a, #feature_slider .fcontent.fstyle-nobg
a{color:#225E9B}a:hover,.commentlist cite a:hover,  #grandchildnav .current_page_item a:hover, .headline h1 a:hover{color:#0F457C}#feature-footer, .main-nav li.current-page-ancestor a, .main-nav li.current_page_item a, .main-nav li.current-page-ancestor ul a, .main-nav li.current_page_item ul a, #wp-calendar caption, #buddypress-page #subnav, #buddypress-page .activity .activity-inner, #buddypress-page table.forum th, #grandchildnav.widget, blockquote, input, textarea, .searchform .searchfield, .wp-caption, .widget-default, .commentlist .alt, #wp-calendar #today, #buddypress-page div.activity-comments form .ac-textarea, #buddypress-page form#whats-new-form #whats-new-textarea, .post-nav, .current_posts_info, .post-footer,  #twitterbar, #carousel .content-pad, .success, .sf-menu li li, .sf-menu li li, .sf-menu li li li, .content-pagination a .cp-num, .hentry table .alternate
td{background:#e9edf5}ul.sf-menu ul li, .post-nav, .current_posts_info, .post-footer, blockquote, input, textarea, .searchform .searchfield, .wp-caption, .widget-default, #buddypress-page div.activity-comments form .ac-textarea, #buddypress-page form#whats-new-form #whats-new-textarea, #grandchildnav.widget, .fpost .post-thumb img, .clip .clip-thumb img, .author-thumb img, #carousel .content ul li a img, #carousel .content ul li a:hover img,#feature-footer{border-color:#a4b3bf}blockquote, input, textarea, .searchform .searchfield, .wp-caption, .widget-default, #buddypress-page div.activity-comments form .ac-textarea, #buddypress-page form#whats-new-form #whats-new-textarea, #grandchildnav.widget, fpost .post-thumb img, .clip .clip-thumb img, .author-thumb
img{border-left-color:#5a6669}blockquote, input, textarea, .searchform .searchfield, .wp-caption, .widget-default, #buddypress-page div.activity-comments form .ac-textarea, #buddypress-page form#whats-new-form #whats-new-textarea, #grandchildnav.widget, fpost .post-thumb img, .clip .clip-thumb img, .author-thumb
img{border-top-color:#5a6669}#feature-footer .feature-footer-pad{border-left-color:#dadcf5}#feature-footer .feature-footer-pad{border-top-color:#dadcf5}#feature-footer, #grandchildnav li a, #grandchildnav .current_page_item  ul li a, #buddypress-page #object-nav ul li
a{text-shadow:#FFF 0 1px 0}#wp-calendar thead th, #buddypress-page #object-nav, .item-avatar a, .comment blockquote, #grandchildnav .current_page_item a, #grandchildnav li a:hover, #grandchildnav .current_page_item  ul li a:hover, #carousel .carousel_text, pagination .wp-pagenavi a, #pagination .wp-pagenavi .current, #pagination .wp-pagenavi .extend, .sf-menu li:hover, .sf-menu li.sfHover, #featurenav a, #feature-footer span.playpause, .content-pagination .cp-num, .content-pagination a:hover .cp-num,ins{background:#F1F1F1}#featurenav a, #feature-footer
span.playpause{border-color:#DDD}#featurenav a, #feature-footer
span.playpause{border-left-color:#CCC}#featurenav a, #feature-footer
span.playpause{border-top-color:#CCC}#buddypress-page #object-nav ul li a:hover,#buddypress-page #object-nav ul li.selected a, #buddypress-page #subnav a:hover, #buddypress-page #subnav li.current a, #featurenav
a.activeSlide{background:#E1E1E1}#featurenav
a.activeSlide{border-color:#CCC}#featurenav
a.activeSlide{border-left-color:#999}#featurenav
a.activeSlide{border-top-color:#999}#footer, #footer li.link-list a, #footer .latest_posts li .list-excerpt{color:#999}#footer a, #footer .widget-title,  #footer li h5
a{color:#FFF}#footer, .fixed_width
#footer{text-shadow:#000 0 -1px 0}</style><link rel="stylesheet" media="screen" id="shareaholic-publisher-css" href="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/sprite.css"><style type="text/css">.shareaholic-arrow-down{ position: absolute !important; left:45% !important; width: 0 !important; height: 0 !important; border-left: 6px solid transparent !important; border-right: 6px solid transparent !important; border-top: 6px solid #ffffff !important; }.shareaholic-tip-text{font-size:12px !important; line-height:120% !important; background: #ffffff !important; color: #212121 !important; padding: 5px !important; border-radius: 5px !important; -webkit-border-radius:5px; !important; -moz-border-radius:5px; !important}</style></head><body class="single single-post postid-391 single-format-standard full_width ttype-single tmain-single"><div id="site" class="one-sidebar-right"><div id="page"><div id="page-canvas"><div id="header" class="container-group fix"><div class="outline"><div id="branding" class="container fix"><div class="texture"><div class="content"><div class="content-pad"><div class="branding_wrap"> <a class="mainlogo-link" href="http://www.redcode.nl/" title="Redcode"><img class="mainlogo-img" src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/newheader_cmp.jpg" alt="Redcode"></a><div class="icons" style="bottom: 0px; right: px;"><a target="_blank" href="http://www.redcode.nl/feed/" class="rsslink"></a> <a target="_blank" href="http://www.twitter.com/royvanrijn" class="twitterlink"></a></div></div><div class="clear"></div></div></div></div></div><div id="primary-nav" class="container fix"><div class="texture"><div class="content"><div class="content-pad"><div id="nav_row" class="main_nav fix"><ul id="menu-nav" class="main-nav"><li class="page_item page-item-1065"><a href="http://www.redcode.nl/arthur-fry-day/">Arthur Fry Day</a></li></ul><form method="get" class="searchform" action="http://www.redcode.nl/" onsubmit="this.submit();return false;"><fieldset> <input value="Search" name="s" class="searchfield" onfocus="if (this.value == 'Search') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search';}" type="text"><input class="submit btn" name="submit" src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/search-btn.png" alt="Go" type="image"></fieldset></form></div><div class="clear"></div></div></div></div></div><div id="sidebar_universal" class="container fix"><div class="texture"><div class="content"><div class="content-pad"><ul id="list_sidebar_universal" class="sidebar_widgets fix"><li id="text-5" class="widget_text widget fix"><div class="widget-pad"><div class="textwidget"><script type="text/javascript"><!--
google_ad_client = "ca-pub-2981680075176239";
/* blogNewCorrect */
google_ad_slot = "5001452186";
google_ad_width = 728;
google_ad_height = 15;
//--></script><script type="text/javascript" src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/show_ads.js"></script><ins style="display:inline-table;border:none;height:15px;margin:0;padding:0;position:relative;visibility:visible;width:728px"><ins id="aswift_0_anchor" style="display:block;border:none;height:15px;margin:0;padding:0;position:relative;visibility:visible;width:728px"><iframe allowtransparency="true" hspace="0" marginwidth="0" marginheight="0" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){i+='.call';setTimeout(h,0)}else if(h.match){i+='.nav';w.location.replace(h)}s.log&amp;&amp;s.log.push(i)}" vspace="0" id="aswift_0" name="aswift_0" style="left: 0px; position: absolute; top: 0px;" frameborder="0" height="15" scrolling="no" width="728"></iframe></ins></ins></div></div></li></ul><div class="clear"></div></div></div></div></div><div id="breadcrumb" class="container fix"><div class="texture"><div class="content"><div class="content-pad"><div class="breadcrumb subtext"><a title="Go to Home." href="http://www.redcode.nl/">Home</a> &gt; <a title="Go to the Algorithms category archives." href="http://www.redcode.nl/blog/category/algorithms/">Algorithms</a> &gt; Creating Shazam in Java</div><div class="clear"></div></div></div></div></div></div></div><div id="page-main" class="container-group fix"><div id="dynamic-content" class="outline fix"><div id="maincontent" class="container fix"><div class="texture"><div class="content"><div class="content-pad"><div id="pagelines_content" class="one-sidebar-right fix"><div id="column-wrap" class="fix"><div id="column-main" class="mcolumn fix"><div class="mcolumn-pad"><div id="postnav" class="copy fix"><div class="copy-pad"><div class="post-nav fix"> <span class="previous"><a href="http://www.redcode.nl/blog/2010/04/playing-around-with-html-5/" rel="prev">Playing around with HTML 5</a></span> <span class="next"><a href="http://www.redcode.nl/blog/2010/06/music-matching-part-deux/" rel="next">Music Matching (part deux)</a></span></div><div class="clear"></div></div></div><div id="theloop" class="copy fix"><div class="copy-pad"><div class="post-391 post type-post status-publish format-standard hentry category-algorithms category-java tag-algorithm tag-music-matching tag-shazam fpost" id="post-391"><div class="post-meta fix"><div class="post-header fix post-nothumb" style=""><div class="post-title-section fix"><div class="post-title fix"><h1 class="entry-title">Creating Shazam in Java</h1><div class="metabar"><em><span class="sword">By</span> <span class="author vcard"><span class="fn"><a href="http://www.redcode.nl/blog/author/admin/" title="Posts by royvanrijn" rel="author">royvanrijn</a></span></span> <span class="sword">On</span> <span class="date time published" title="2010-06-01T01:43:08+0000">June 1, 2010</span> · <span class="post-comments"><a href="http://www.redcode.nl/blog/2010/06/creating-shazam-in-java/#comments">285 Comments</a></span> · <span class="sword">In</span> <span class="categories"><a href="http://www.redcode.nl/blog/category/algorithms/" title="View all posts in Algorithms" rel="category tag">Algorithms</a>, <a href="http://www.redcode.nl/blog/category/java/" title="View all posts in Java Programming" rel="category tag">Java Programming</a></span> </em></div></div></div></div></div><div class="entry_wrap fix"><div class="entry_content"><p>A couple of days ago I encountered this article: <a href="http://laplacian.wordpress.com/2009/01/10/how-shazam-works/">How Shazam Works</a></p><p>This
 got me interested in how a program like Shazam works… And more 
importantly, how hard is it to program something similar in Java?</p><p><span id="more-391"></span></p><h3>About Shazam</h3><p>Shazam
 is an application which you can use to analyse/match music. When you 
install it on your phone, and hold the microphone to some music for 
about 20 to 30 seconds, it will tell you which song it is.</p><p>When I 
first used it it gave me a magical feeling. “How did it do that!?”. And 
even today, after using it a lot, it still has a bit of magical feel to 
it.<br> Wouldn’t it be great if we can program something of our own that
 gives that same feeling? That was my goal for the past weekend.</p><h3>Listen up..!</h3><p>First
 things first, get the music sample to analyse we first need to listen 
to the microphone in our Java application…! This is something I hadn’t 
done yet in Java, so I had no idea how hard this was going to be.</p><p>But it turned out it was very easy:</p><div class="syntaxhighlighter  " id="highlighter_553082"><div class="bar"><div class="toolbar"><a class="item viewSource" style="width: 16px; height: 16px;" title="view source" href="#viewSource">view source</a><div class="item copyToClipboard"><embed id="highlighter_553082_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_553082" menu="false" src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/clipboard.swf" height="16" width="16"></div><a class="item printSource" style="width: 16px; height: 16px;" title="print" href="#printSource">print</a><a class="item about" style="width: 16px; height: 16px;" title="?" href="#about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">final</code> <code class="plain">AudioFormat format = getFormat(); </code><code class="comments">//Fill AudioFormat with the wanted settings</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">DataLine.Info info = </code><code class="keyword">new</code> <code class="plain">DataLine.Info(TargetDataLine.</code><code class="keyword">class</code><code class="plain">, format);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="keyword">final</code> <code class="plain">TargetDataLine line = (TargetDataLine) AudioSystem.getLine(info);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="plain">line.open(format);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain">line.start();</code></td></tr></tbody></table></div></div></div><p>Now we can read the data from the TargetDataLine just like a normal InputStream:</p><div class="syntaxhighlighter  " id="highlighter_858305"><div class="bar"><div class="toolbar"><a class="item viewSource" style="width: 16px; height: 16px;" title="view source" href="#viewSource">view source</a><div class="item copyToClipboard"><embed id="highlighter_858305_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_858305" menu="false" src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/clipboard.swf" height="16" width="16"></div><a class="item printSource" style="width: 16px; height: 16px;" title="print" href="#printSource">print</a><a class="item about" style="width: 16px; height: 16px;" title="?" href="#about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="comments">// In another thread I start:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="plain">OutputStream out = </code><code class="keyword">new</code> <code class="plain">ByteArrayOutputStream();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="plain">running = </code><code class="keyword">true</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="keyword">try</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">while</code> <code class="plain">(running) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">int</code> <code class="plain">count = line.read(buffer, </code><code class="value">0</code><code class="plain">, buffer.length);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(count &gt; </code><code class="value">0</code><code class="plain">) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">out.write(buffer, </code><code class="value">0</code><code class="plain">, count);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">out.close();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="plain">} </code><code class="keyword">catch</code> <code class="plain">(IOException e) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">System.err.println(</code><code class="string">"I/O problems: "</code> <code class="plain">+ e);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">System.exit(-</code><code class="value">1</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>Using this method it is easy to open the microphone and record all the sounds! The AudioFormat I’m currently using is:</p><div class="syntaxhighlighter  " id="highlighter_248386"><div class="bar"><div class="toolbar"><a class="item viewSource" style="width: 16px; height: 16px;" title="view source" href="#viewSource">view source</a><div class="item copyToClipboard"><embed id="highlighter_248386_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_248386" menu="false" src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/clipboard.swf" height="16" width="16"></div><a class="item printSource" style="width: 16px; height: 16px;" title="print" href="#printSource">print</a><a class="item about" style="width: 16px; height: 16px;" title="?" href="#about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">private</code> <code class="plain">AudioFormat getFormat() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">float</code> <code class="plain">sampleRate = </code><code class="value">44100</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">int</code> <code class="plain">sampleSizeInBits = </code><code class="value">8</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">int</code> <code class="plain">channels = </code><code class="value">1</code><code class="plain">; </code><code class="comments">//mono</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">boolean</code> <code class="plain">signed = </code><code class="keyword">true</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">boolean</code> <code class="plain">bigEndian = </code><code class="keyword">true</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="keyword">new</code> <code class="plain">AudioFormat(sampleRate, sampleSizeInBits, channels, signed, bigEndian);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>So, now we have the recorded data in a ByteArrayOutputStream, great! Step 1 complete.</p><h3>Microphone data</h3><p>The
 next challenge is analyzing the data, when I outputted the data I 
received in my byte array I got a long list of numbers, like this:</p><div class="syntaxhighlighter  " id="highlighter_486395"><div class="bar"><div class="toolbar"><a class="item viewSource" style="width: 16px; height: 16px;" title="view source" href="#viewSource">view source</a><div class="item copyToClipboard"><embed id="highlighter_486395_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_486395" menu="false" src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/clipboard.swf" height="16" width="16"></div><a class="item printSource" style="width: 16px; height: 16px;" title="print" href="#printSource">print</a><a class="item about" style="width: 16px; height: 16px;" title="?" href="#about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">0</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">0</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="plain">1</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="plain">2</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="plain">4</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="plain">7</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="plain">6</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="plain">3</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="plain">-1</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="plain">-2</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="plain">-4</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="plain">-2</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="plain">-5</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="plain">-7</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="plain">-8</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="plain">(etc)</code></td></tr></tbody></table></div></div></div><p>Erhm… yes? This is sound?</p><p>To see if the data could be visualized I took the output and placed it in Open Office to generate a line graph:</p><p><a href="http://www.redcode.nl/blog/wp-content/uploads/2010/06/graph.png"><img src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/graph-300x248.png" alt="" title="graph" class="alignnone size-medium wp-image-407" height="248" width="300"></a></p><p>Ah yes! This kind of looks like ‘sound’. It looks like what you see when using for example Windows Sound Recorder.</p><p>This data is actually known as <a href="http://en.wikipedia.org/wiki/Time_domain">time domain</a>.
 But these numbers are currently basically useless to us… if you read 
the above article on how Shazam works you’ll read that they use a <a href="http://en.wikipedia.org/wiki/Spectrum_analyzer">spectrum analysis</a> instead of direct time domain data.<br> So the next big question is: How do we transform the current data into a spectrum analysis?</p><h3>Discrete Fourier transform</h3><p>To turn our data into usable data we need to apply the so called <a href="http://en.wikipedia.org/wiki/Discrete_Fourier_transform">Discrete Fourier Transformation</a>. This turns the data from time domain into frequency domain.<br>
 There is just one problem, if you transform the data into the frequency
 domain you loose every bit of information regarding time. So you’ll 
know what the magnitude of all the frequencies are, but you have no idea
 when they appear.</p><p>To solve this we need a sliding window. We take
 chunks of data (in my case 4096 bytes of data) and transform just this 
bit of information. Then we know the magnitude of all frequencies that 
occur during just these 4096 bytes.</p><h3>Implementing this</h3><p>Instead
 of worrying about the Fourier Transformation I googled a bit and found 
code for the so called FFT (Fast Fourier Transformation). I’m calling 
this code with the chunks:</p><div class="syntaxhighlighter  " id="highlighter_645986"><div class="bar"><div class="toolbar"><a class="item viewSource" style="width: 16px; height: 16px;" title="view source" href="#viewSource">view source</a><div class="item copyToClipboard"><embed id="highlighter_645986_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_645986" menu="false" src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/clipboard.swf" height="16" width="16"></div><a class="item printSource" style="width: 16px; height: 16px;" title="print" href="#printSource">print</a><a class="item about" style="width: 16px; height: 16px;" title="?" href="#about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">byte</code> <code class="plain">audio[] = out.toByteArray();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="keyword">final</code> <code class="keyword">int</code> <code class="plain">totalSize = audio.length;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="keyword">int</code> <code class="plain">amountPossible = totalSize/Harvester.CHUNK_SIZE;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="comments">//When turning into frequency domain we'll need complex numbers:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="plain">Complex[][] results = </code><code class="keyword">new</code> <code class="plain">Complex[amountPossible][];</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="comments">//For all the chunks:</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="keyword">for</code><code class="plain">(</code><code class="keyword">int</code> <code class="plain">times = </code><code class="value">0</code><code class="plain">;times &lt; amountPossible; times++) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">Complex[] complex = </code><code class="keyword">new</code> <code class="plain">Complex[Harvester.CHUNK_SIZE];</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">for</code><code class="plain">(</code><code class="keyword">int</code> <code class="plain">i = </code><code class="value">0</code><code class="plain">;i &lt; Harvester.CHUNK_SIZE;i++) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">//Put the time domain data into a complex number with imaginary part as 0:</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">complex[i] = </code><code class="keyword">new</code> <code class="plain">Complex(audio[(times*Harvester.CHUNK_SIZE)+i], </code><code class="value">0</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">//Perform FFT analysis on the chunk:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">results[times] = FFT.fft(complex);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="comments">//Done!</code></td></tr></tbody></table></div></div></div><p>Now
 we have a double array containing all chunks as Complex[]. This array 
contains data about all frequencies. To visualize this data I decided to
 implement a full spectrum analyzer (just to make sure I got the math 
right).<br> To show the data I hacked this together:</p><div class="syntaxhighlighter  " id="highlighter_739039"><div class="bar"><div class="toolbar"><a class="item viewSource" style="width: 16px; height: 16px;" title="view source" href="#viewSource">view source</a><div class="item copyToClipboard"><embed id="highlighter_739039_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_739039" menu="false" src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/clipboard.swf" height="16" width="16"></div><a class="item printSource" style="width: 16px; height: 16px;" title="print" href="#printSource">print</a><a class="item about" style="width: 16px; height: 16px;" title="?" href="#about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">for</code><code class="plain">(</code><code class="keyword">int</code> <code class="plain">i = </code><code class="value">0</code><code class="plain">; i &lt; results.length; i++) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">int</code> <code class="plain">freq = </code><code class="value">1</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">for</code><code class="plain">(</code><code class="keyword">int</code> <code class="plain">line = </code><code class="value">1</code><code class="plain">; line &lt; size; line++) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">// To get the magnitude of the sound at a given frequency slice</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">// get the abs() from the complex number.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">// In this case I use Math.log to get a more managable number (used for color)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">double</code> <code class="plain">magnitude = Math.log(results[i][freq].abs()+</code><code class="value">1</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">// The more blue in the color the more intensity for a given frequency point:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">g2d.setColor(</code><code class="keyword">new</code> <code class="plain">Color(</code><code class="value">0</code><code class="plain">,(</code><code class="keyword">int</code><code class="plain">)magnitude*</code><code class="value">10</code><code class="plain">,(</code><code class="keyword">int</code><code class="plain">)magnitude*</code><code class="value">20</code><code class="plain">));</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">// Fill:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">g2d.fillRect(i*blockSizeX, (size-line)*blockSizeY,blockSizeX,blockSizeY);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">// I used a improviced logarithmic scale and normal scale:</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(logModeEnabled &amp;&amp; (Math.log10(line) * Math.log10(line)) &gt; </code><code class="value">1</code><code class="plain">) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">freq += (</code><code class="keyword">int</code><code class="plain">) (Math.log10(line) * Math.log10(line));</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">} </code><code class="keyword">else</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">freq++;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><h3>Introducing, Aphex Twin</h3><p>This
 seems a bit of OT (off-topic), but I’d like to tell you about a 
electronic musician called Aphex Twin (Richard David James). He makes 
crazy electronic music… but some songs have an interesting feature. His 
biggest hit for example, <a href="http://en.wikipedia.org/wiki/Windowlicker">Windowlicker</a> has a spectrogram image in it.<br>
 If you look at the song as spectral image it shows a nice spiral. 
Another song, called ‘Mathematical Equation’ shows the face of Twin! 
More information can be found here: <a href="http://www.bastwood.com/aphex.php">Bastwood – Aphex Twin’s face</a>.</p><p>When running this song against my spectral analyzer I get the following result:</p><p><a href="http://www.redcode.nl/blog/wp-content/uploads/2010/06/face.png"><img src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/face-299x300.png" alt="" title="face" class="alignnone size-medium wp-image-410" height="300" width="299"></a></p><p>Not perfect, but it seems to be Twin’s face!</p><h3>Determining the key music points</h3><p>The
 next step in Shazam’s algorithm is to determine some key points in the 
song, save those points as a hash and then try to match on them against 
their database of over 8 million songs. This is done for speed, the 
lookup of a hash is O(1) speed. That explains a lot of the awesome 
performance of Shazam!</p><p>Because I wanted to have everything working
 in one weekend (this is my maximum attention span sadly enough, then I 
need a new project to work on) I kept my algorithm as simple as 
possible. And to my surprise it worked.</p><p>For each line the in 
spectrum analysis I take the points with the highest magnitude from 
certain ranges. In my case: 40-80, 80-120, 120-180, 180-300.</p><div class="syntaxhighlighter  " id="highlighter_292533"><div class="bar"><div class="toolbar"><a class="item viewSource" style="width: 16px; height: 16px;" title="view source" href="#viewSource">view source</a><div class="item copyToClipboard"><embed id="highlighter_292533_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_292533" menu="false" src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/clipboard.swf" height="16" width="16"></div><a class="item printSource" style="width: 16px; height: 16px;" title="print" href="#printSource">print</a><a class="item about" style="width: 16px; height: 16px;" title="?" href="#about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="comments">//For every line of data:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="keyword">for</code> <code class="plain">(</code><code class="keyword">int</code> <code class="plain">freq = LOWER_LIMIT; freq &lt; UPPER_LIMIT-</code><code class="value">1</code><code class="plain">; freq++) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">//Get the magnitude:</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">double</code> <code class="plain">mag = Math.log(results[freq].abs() + </code><code class="value">1</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">//Find out which range we are in:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">int</code> <code class="plain">index = getIndex(freq);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">//Save the highest magnitude and corresponding frequency:</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(mag &gt; highscores[index]) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">highscores[index] = mag;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">recordPoints[index] = freq;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="comments">//Write the points to a file:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="keyword">for</code> <code class="plain">(</code><code class="keyword">int</code> <code class="plain">i = </code><code class="value">0</code><code class="plain">; i &lt; AMOUNT_OF_POINTS; i++) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">fw.append(recordPoints[i] + </code><code class="string">"\t"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="plain">fw.append(</code><code class="string">"\n"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="comments">// ... snip ...</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">static</code> <code class="keyword">final</code> <code class="keyword">int</code><code class="plain">[] RANGE = </code><code class="keyword">new</code> <code class="keyword">int</code><code class="plain">[] {</code><code class="value">40</code><code class="plain">,</code><code class="value">80</code><code class="plain">,</code><code class="value">120</code><code class="plain">,</code><code class="value">180</code><code class="plain">, UPPER_LIMIT+</code><code class="value">1</code><code class="plain">};</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>27</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>28</code></td><td class="content"><code class="comments">//Find out in which range</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>29</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">static</code> <code class="keyword">int</code> <code class="plain">getIndex(</code><code class="keyword">int</code> <code class="plain">freq) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>30</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">int</code> <code class="plain">i = </code><code class="value">0</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>31</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">while</code><code class="plain">(RANGE[i] &lt; freq) i++;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>32</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">i;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>33</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>34</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>When we record a song now, we get a list of numbers such as:</p><div class="syntaxhighlighter  " id="highlighter_733750"><div class="bar"><div class="toolbar"><a class="item viewSource" style="width: 16px; height: 16px;" title="view source" href="#viewSource">view source</a><div class="item copyToClipboard"><embed id="highlighter_733750_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_733750" menu="false" src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/clipboard.swf" height="16" width="16"></div><a class="item printSource" style="width: 16px; height: 16px;" title="print" href="#printSource">print</a><a class="item about" style="width: 16px; height: 16px;" title="?" href="#about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">33&nbsp; 56&nbsp; 99&nbsp; 121 195 </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">30&nbsp; 41&nbsp; 84&nbsp; 146 199 </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="plain">33&nbsp; 51&nbsp; 99&nbsp; 133 183 </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="plain">33&nbsp; 47&nbsp; 94&nbsp; 137 193 </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="plain">32&nbsp; 41&nbsp; 106 161 191 </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="plain">33&nbsp; 76&nbsp; 95&nbsp; 123 185 </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="plain">40&nbsp; 68&nbsp; 110 134 232 </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="plain">30&nbsp; 62&nbsp; 88&nbsp; 125 194 </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="plain">34&nbsp; 57&nbsp; 83&nbsp; 121 182 </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="plain">34&nbsp; 42&nbsp; 89&nbsp; 123 182 </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="plain">33&nbsp; 56&nbsp; 99&nbsp; 121 195 </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="plain">30&nbsp; 41&nbsp; 84&nbsp; 146 199 </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="plain">33&nbsp; 51&nbsp; 99&nbsp; 133 183 </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="plain">33&nbsp; 47&nbsp; 94&nbsp; 137 193 </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="plain">32&nbsp; 41&nbsp; 106 161 191 </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="plain">33&nbsp; 76&nbsp; 95&nbsp; 123 185 </code></td></tr></tbody></table></div></div></div><p>If I record a song and look at it visually it looks like this:</p><p><a href="http://www.redcode.nl/blog/wp-content/uploads/2010/06/points.png"><img src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/points-228x300.png" alt="" title="points" class="alignnone size-medium wp-image-411" height="300" width="228"></a><br> (all the red dots are ‘important points’)</p><h3>Indexing my own music</h3><p>With
 this algorithm in place I decided to index all my 3000 songs. Instead 
of using the microphone you can just open mp3 files, convert them to the
 correct format, and read them the same way we did with the microphone, 
using an AudioInputStream. Converting stereo music into mono-channel 
audio was a bit trickier then I hoped. Examples can be found online 
(requires a bit too much code to paste here) have to change the sampling
 a bit.</p><h3>Matching!</h3><p>The most important part of the program 
is the matching process. Reading Shazams paper they use hashing to get 
matches and the decide which song was the best match.</p><p>Instead of 
using difficult point-groupings in time I decided to use a line of our 
data (for example “33, 47, 94, 137″) as one hash: 1370944733<br> (in my tests using 3 or 4 points works best, but tweaking is difficult, I need to re-index my mp3 every time!)</p><p>Example hash-code using 4 points per line:</p><div class="syntaxhighlighter  " id="highlighter_557578"><div class="bar"><div class="toolbar"><a class="item viewSource" style="width: 16px; height: 16px;" title="view source" href="#viewSource">view source</a><div class="item copyToClipboard"><embed id="highlighter_557578_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_557578" menu="false" src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/clipboard.swf" height="16" width="16"></div><a class="item printSource" style="width: 16px; height: 16px;" title="print" href="#printSource">print</a><a class="item about" style="width: 16px; height: 16px;" title="?" href="#about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="comments">//Using a little bit of error-correction, damping</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="keyword">private</code> <code class="keyword">static</code> <code class="keyword">final</code> <code class="keyword">int</code> <code class="plain">FUZ_FACTOR = </code><code class="value">2</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="keyword">private</code> <code class="keyword">long</code> <code class="plain">hash(String line) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">String[] p = line.split(</code><code class="string">"\t"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">long</code> <code class="plain">p1 = Long.parseLong(p[</code><code class="value">0</code><code class="plain">]);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">long</code> <code class="plain">p2 = Long.parseLong(p[</code><code class="value">1</code><code class="plain">]);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">long</code> <code class="plain">p3 = Long.parseLong(p[</code><code class="value">2</code><code class="plain">]);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">long</code> <code class="plain">p4 = Long.parseLong(p[</code><code class="value">3</code><code class="plain">]);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code>&nbsp; <code class="plain">(p4-(p4%FUZ_FACTOR)) * </code><code class="value">100000000</code> <code class="plain">+ (p3-(p3%FUZ_FACTOR)) * </code><code class="value">100000</code> <code class="plain">+ (p2-(p2%FUZ_FACTOR)) * </code><code class="value">100</code> <code class="plain">+ (p1-(p1%FUZ_FACTOR));</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>Now I create two data sets:</p><p>- A list of songs, List&lt;String&gt; (List index is Song-ID, String is songname)<br> - Database of hashes: Map&lt;Long, List&lt;DataPoint&gt;&gt;</p><p>The long in the database of hashes represents the hash itself, and it has a bucket of DataPoints.</p><p>A DataPoint looks like:</p><div class="syntaxhighlighter  " id="highlighter_134758"><div class="bar"><div class="toolbar"><a class="item viewSource" style="width: 16px; height: 16px;" title="view source" href="#viewSource">view source</a><div class="item copyToClipboard"><embed id="highlighter_134758_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_134758" menu="false" src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/clipboard.swf" height="16" width="16"></div><a class="item printSource" style="width: 16px; height: 16px;" title="print" href="#printSource">print</a><a class="item about" style="width: 16px; height: 16px;" title="?" href="#about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">private</code> <code class="keyword">class</code> <code class="plain">DataPoint {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">private</code> <code class="keyword">int</code> <code class="plain">time;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">private</code> <code class="keyword">int</code> <code class="plain">songId;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="plain">DataPoint(</code><code class="keyword">int</code> <code class="plain">songId, </code><code class="keyword">int</code> <code class="plain">time) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">this</code><code class="plain">.songId = songId;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">this</code><code class="plain">.time = time;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="keyword">int</code> <code class="plain">getTime() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">time;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="keyword">int</code> <code class="plain">getSongId() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">songId;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>Now
 we already have everything in place to do a lookup. First I read all 
the songs and generate hashes for each point of data. This is put into 
the hash-database.<br> The second step is reading the data of the song 
we need to match. These hashes are retrieved and we look at the matching
 datapoints.</p><p>There is just one problem, for each hash there are 
some hits, but how do we determine which song is the correct song..? 
Looking at the amount of matches? No, this doesn’t work…<br> The most 
important thing is timing. We must overlap the timing…! But how can we 
do this if we don’t know where we are in the song? After all, we could 
just as easily have recorded the final chords of the song.</p><p>By looking at the data I discovered something interesting, because we have the following data:</p><p>- A hash of the recording<br> - A matching hash of the possible match<br> - A song ID of the possible match<br> - The current time in our own recording<br> - The time of the hash in the possible match</p><p>Now
 we can substract the current time in our recording (for example, line 
34) with the time of the hash-match (for example, line 1352). This 
difference is stored together with the song ID. Because this offset, 
this difference, tells us where we possibly could be in the song.<br> 
When we have gone through all the hashes from our recording we are left 
with a lot of song id’s and offsets. The cool thing is, if you have a 
lot of hashes with matching offsets, you’ve found your song.</p><h3>The results</h3><p>For example, when listening to The Kooks – Match Box for just 20 seconds, this is the output of my program:</p><div class="syntaxhighlighter  " id="highlighter_948164"><div class="bar"><div class="toolbar"><a class="item viewSource" style="width: 16px; height: 16px;" title="view source" href="#viewSource">view source</a><div class="item copyToClipboard"><embed id="highlighter_948164_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_948164" menu="false" src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/clipboard.swf" height="16" width="16"></div><a class="item printSource" style="width: 16px; height: 16px;" title="print" href="#printSource">print</a><a class="item about" style="width: 16px; height: 16px;" title="?" href="#about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">Done loading: 2921 songs</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="plain">Start matching song...</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="plain">Top 20 matches:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="plain">01: 08_the_kooks_-_match_box.mp3 with 16 matches.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="plain">02: 04 Racoon - Smoothly.mp3 with 8 matches.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="plain">03: 05 Röyksopp - Poor Leno.mp3 with 7 matches.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="plain">04: 07_athlete_-_yesterday_threw_everyting_a_me.mp3 with 7 matches.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="plain">05: Flogging Molly - WMH - Dont Let Me Dia Still Wonderin.mp3 with 7 matches.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="plain">06: coldplay - 04 - sparks.mp3 with 7 matches.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="plain">07: Coldplay - Help Is Round The Corner (yellow b-side).mp3 with 7 matches.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="plain">08: the arcade fire - 09 - rebellion (lies).mp3 with 7 matches.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="plain">09: 01-coldplay-_clocks.mp3 with 6 matches.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="plain">10: 02 Scared Tonight.mp3 with 6 matches.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="plain">11: 02-radiohead-pyramid_song-ksi.mp3 with 6 matches.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="plain">12: 03 Shadows Fall.mp3 with 6 matches.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="plain">13: 04 Röyksopp - In Space.mp3 with 6 matches.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="plain">14: 04 Track04.mp3 with 6 matches.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="plain">15: 05 - Dress Up In You.mp3 with 6 matches.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="plain">16: 05 Supergrass - Can't Get Up.mp3 with 6 matches.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="plain">17: 05 Track05.mp3 with 6 matches.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="plain">18: 05The Fox In The Snow.mp3 with 6 matches.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="plain">19: 05_athlete_-_wires.mp3 with 6 matches.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content"><code class="plain">20: 06 Racoon - Feel Like Flying.mp3 with 6 matches.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>27</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>28</code></td><td class="content"><code class="plain">Matching took: 259 ms</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>29</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>30</code></td><td class="content"><code class="plain">Final prediction: 08_the_kooks_-_match_box.mp3.song with 16 matches.</code></td></tr></tbody></table></div></div></div><p>It works!!</p><p>Listening for 20 seconds it can match almost all the songs I have. And even this <a href="http://www.youtube.com/watch?v=sLR9d4sMcq4">live recording of the Editors</a> could be matched to the correct song after listening 40 seconds!</p><p>Again it feels like magic! :-)</p><p>Currently,
 the code isn’t in a releasable state and it doesn’t work perfectly. It 
has been a pure weekend-hack, more like a proof-of-concept / algorithm 
exploration.</p><p>Maybe, if enough people ask about it, I’ll clean it up and release it somewhere.</p><h3>Update:</h3><p>The
 Shazam patent holders lawyers are sending me emails to stop me from 
releasing the code and removing this blogpost, read the story <a href="http://www.redcode.nl/blog/2010/07/patent-infringement/">here</a>.</p><div style="margin-left: 120.5px;" class="shr-publisher-391 shareaholic-show-on-load"><div class="shr-bookmarks"><ul class="shr-socials"><li style="margin-left:0px !important;" class="shr-61 shareaholic"><a orig_title="Post to Slashdot" class="external" target="_blank" rel="nofollow" href="http://www.shareaholic.com/api/share/?title=Creating+Shazam+in+Java&amp;link=http%3A%2F%2Fwww.redcode.nl%2Fblog%2F2010%2F06%2Fcreating-shazam-in-java%2F&amp;notes=A%2520couple%2520of%2520days%2520ago%2520I%2520encountered%2520this%2520article%253A%2520How%2520Shazam%2520Works%250D%250A%250D%250AThis%2520got%2520me%2520interested%2520in%2520how%2520a%2520program%2520like%2520Shazam%2520works...%2520And%2520more%2520importantly%252C%2520how%2520hard%2520is%2520it%2520to%2520program%2520something%2520similar%2520in%2520Java%253F%250D%250A%250D%250A%250D%250AAbout%2520Shazam%250D%250A%250D%250AShazam%2520is%2520an%2520application%2520which%2520you%2520can%2520use%2520to%2520analyse%252Fmatch%2520music.%2520When%2520yo&amp;short_link=&amp;shortener=google&amp;shortener_key=&amp;v=1&amp;apitype=1&amp;apikey=8afa39428933be41f8afdb8ea21a495c&amp;source=Shareaholic-Publishers&amp;template=&amp;service=61&amp;ctype=&amp;tags=java%7C1%7Cdelicious,algorithm%7C1%7Cdelicious,howto%7C1%7Cdelicious,programming%7C1%7Cdelicious,tutorial%7C1%7Cdelicious,music%7C1%7Cdelicious,recognition%7C1%7Cdelicious,algorithms%7C1%7Cdelicious,audio%7C1%7Cdelicious,shazam%7C1%7Cdelicious">Post to Slashdot</a></li><li style="margin-left:0px !important;" class="shr-102 shareaholic"><a orig_title="Add to DZone" class="external" target="_blank" rel="nofollow" href="http://www.shareaholic.com/api/share/?title=Creating+Shazam+in+Java&amp;link=http%3A%2F%2Fwww.redcode.nl%2Fblog%2F2010%2F06%2Fcreating-shazam-in-java%2F&amp;notes=A%2520couple%2520of%2520days%2520ago%2520I%2520encountered%2520this%2520article%253A%2520How%2520Shazam%2520Works%250D%250A%250D%250AThis%2520got%2520me%2520interested%2520in%2520how%2520a%2520program%2520like%2520Shazam%2520works...%2520And%2520more%2520importantly%252C%2520how%2520hard%2520is%2520it%2520to%2520program%2520something%2520similar%2520in%2520Java%253F%250D%250A%250D%250A%250D%250AAbout%2520Shazam%250D%250A%250D%250AShazam%2520is%2520an%2520application%2520which%2520you%2520can%2520use%2520to%2520analyse%252Fmatch%2520music.%2520When%2520yo&amp;short_link=&amp;shortener=google&amp;shortener_key=&amp;v=1&amp;apitype=1&amp;apikey=8afa39428933be41f8afdb8ea21a495c&amp;source=Shareaholic-Publishers&amp;template=&amp;service=102&amp;ctype=&amp;tags=java%7C1%7Cdelicious,algorithm%7C1%7Cdelicious,howto%7C1%7Cdelicious,programming%7C1%7Cdelicious,tutorial%7C1%7Cdelicious,music%7C1%7Cdelicious,recognition%7C1%7Cdelicious,algorithms%7C1%7Cdelicious,audio%7C1%7Cdelicious,shazam%7C1%7Cdelicious">Add to DZone</a></li><li style="margin-left:0px !important;" class="shr-40 shareaholic"><a orig_title="Add to Reddit" class="external" target="_blank" rel="nofollow" href="http://www.shareaholic.com/api/share/?title=Creating+Shazam+in+Java&amp;link=http%3A%2F%2Fwww.redcode.nl%2Fblog%2F2010%2F06%2Fcreating-shazam-in-java%2F&amp;notes=A%2520couple%2520of%2520days%2520ago%2520I%2520encountered%2520this%2520article%253A%2520How%2520Shazam%2520Works%250D%250A%250D%250AThis%2520got%2520me%2520interested%2520in%2520how%2520a%2520program%2520like%2520Shazam%2520works...%2520And%2520more%2520importantly%252C%2520how%2520hard%2520is%2520it%2520to%2520program%2520something%2520similar%2520in%2520Java%253F%250D%250A%250D%250A%250D%250AAbout%2520Shazam%250D%250A%250D%250AShazam%2520is%2520an%2520application%2520which%2520you%2520can%2520use%2520to%2520analyse%252Fmatch%2520music.%2520When%2520yo&amp;short_link=&amp;shortener=google&amp;shortener_key=&amp;v=1&amp;apitype=1&amp;apikey=8afa39428933be41f8afdb8ea21a495c&amp;source=Shareaholic-Publishers&amp;template=&amp;service=40&amp;ctype=&amp;tags=java%7C1%7Cdelicious,algorithm%7C1%7Cdelicious,howto%7C1%7Cdelicious,programming%7C1%7Cdelicious,tutorial%7C1%7Cdelicious,music%7C1%7Cdelicious,recognition%7C1%7Cdelicious,algorithms%7C1%7Cdelicious,audio%7C1%7Cdelicious,shazam%7C1%7Cdelicious">Add to Reddit</a></li><li style="margin-left:0px !important;" class="shr-5 shareaholic"><a orig_title="Post to Facebook" class="external" target="_blank" rel="nofollow" href="http://www.shareaholic.com/api/share/?title=Creating+Shazam+in+Java&amp;link=http%3A%2F%2Fwww.redcode.nl%2Fblog%2F2010%2F06%2Fcreating-shazam-in-java%2F&amp;notes=A%2520couple%2520of%2520days%2520ago%2520I%2520encountered%2520this%2520article%253A%2520How%2520Shazam%2520Works%250D%250A%250D%250AThis%2520got%2520me%2520interested%2520in%2520how%2520a%2520program%2520like%2520Shazam%2520works...%2520And%2520more%2520importantly%252C%2520how%2520hard%2520is%2520it%2520to%2520program%2520something%2520similar%2520in%2520Java%253F%250D%250A%250D%250A%250D%250AAbout%2520Shazam%250D%250A%250D%250AShazam%2520is%2520an%2520application%2520which%2520you%2520can%2520use%2520to%2520analyse%252Fmatch%2520music.%2520When%2520yo&amp;short_link=&amp;shortener=google&amp;shortener_key=&amp;v=1&amp;apitype=1&amp;apikey=8afa39428933be41f8afdb8ea21a495c&amp;source=Shareaholic-Publishers&amp;template=&amp;service=5&amp;ctype=&amp;tags=java%7C1%7Cdelicious,algorithm%7C1%7Cdelicious,howto%7C1%7Cdelicious,programming%7C1%7Cdelicious,tutorial%7C1%7Cdelicious,music%7C1%7Cdelicious,recognition%7C1%7Cdelicious,algorithms%7C1%7Cdelicious,audio%7C1%7Cdelicious,shazam%7C1%7Cdelicious">Post to Facebook</a><div class="shr-count"><div aria-hidden="true" style="left: 9px; top: -10px;" class="shr-count-outline">173</div><div aria-hidden="true" style="left: 10px; top: -10px;" class="shr-count-outline">173</div><div aria-hidden="true" style="left: 11px; top: -10px;" class="shr-count-outline">173</div><div aria-hidden="true" style="left: 9px; top: -11px;" class="shr-count-outline">173</div><div aria-hidden="true" style="left: 11px; top: -11px;" class="shr-count-outline">173</div><div aria-hidden="true" style="left: 9px; top: -12px;" class="shr-count-outline">173</div><div aria-hidden="true" style="left: 10px; top: -12px;" class="shr-count-outline">173</div><div aria-hidden="true" style="left: 11px; top: -12px;" class="shr-count-outline">173</div><div aria-label="Number of times this webpage has been shared" style="left: 10px; top: -11px;" class="shr-count-center">173</div></div></li><li style="margin-left:0px !important;" class="shr-202 shareaholic"><a orig_title="Post to YC Hacker News" class="external" target="_blank" rel="nofollow" href="http://www.shareaholic.com/api/share/?title=Creating+Shazam+in+Java&amp;link=http%3A%2F%2Fwww.redcode.nl%2Fblog%2F2010%2F06%2Fcreating-shazam-in-java%2F&amp;notes=A%2520couple%2520of%2520days%2520ago%2520I%2520encountered%2520this%2520article%253A%2520How%2520Shazam%2520Works%250D%250A%250D%250AThis%2520got%2520me%2520interested%2520in%2520how%2520a%2520program%2520like%2520Shazam%2520works...%2520And%2520more%2520importantly%252C%2520how%2520hard%2520is%2520it%2520to%2520program%2520something%2520similar%2520in%2520Java%253F%250D%250A%250D%250A%250D%250AAbout%2520Shazam%250D%250A%250D%250AShazam%2520is%2520an%2520application%2520which%2520you%2520can%2520use%2520to%2520analyse%252Fmatch%2520music.%2520When%2520yo&amp;short_link=&amp;shortener=google&amp;shortener_key=&amp;v=1&amp;apitype=1&amp;apikey=8afa39428933be41f8afdb8ea21a495c&amp;source=Shareaholic-Publishers&amp;template=&amp;service=202&amp;ctype=&amp;tags=java%7C1%7Cdelicious,algorithm%7C1%7Cdelicious,howto%7C1%7Cdelicious,programming%7C1%7Cdelicious,tutorial%7C1%7Cdelicious,music%7C1%7Cdelicious,recognition%7C1%7Cdelicious,algorithms%7C1%7Cdelicious,audio%7C1%7Cdelicious,shazam%7C1%7Cdelicious">Post to YC Hacker News</a></li><li style="margin-left:0px !important;" class="shr-2 shareaholic"><a orig_title="Post to Delicious" class="external" target="_blank" rel="nofollow" href="http://www.shareaholic.com/api/share/?title=Creating+Shazam+in+Java&amp;link=http%3A%2F%2Fwww.redcode.nl%2Fblog%2F2010%2F06%2Fcreating-shazam-in-java%2F&amp;notes=A%2520couple%2520of%2520days%2520ago%2520I%2520encountered%2520this%2520article%253A%2520How%2520Shazam%2520Works%250D%250A%250D%250AThis%2520got%2520me%2520interested%2520in%2520how%2520a%2520program%2520like%2520Shazam%2520works...%2520And%2520more%2520importantly%252C%2520how%2520hard%2520is%2520it%2520to%2520program%2520something%2520similar%2520in%2520Java%253F%250D%250A%250D%250A%250D%250AAbout%2520Shazam%250D%250A%250D%250AShazam%2520is%2520an%2520application%2520which%2520you%2520can%2520use%2520to%2520analyse%252Fmatch%2520music.%2520When%2520yo&amp;short_link=&amp;shortener=google&amp;shortener_key=&amp;v=1&amp;apitype=1&amp;apikey=8afa39428933be41f8afdb8ea21a495c&amp;source=Shareaholic-Publishers&amp;template=&amp;service=2&amp;ctype=&amp;tags=java%7C1%7Cdelicious,algorithm%7C1%7Cdelicious,howto%7C1%7Cdelicious,programming%7C1%7Cdelicious,tutorial%7C1%7Cdelicious,music%7C1%7Cdelicious,recognition%7C1%7Cdelicious,algorithms%7C1%7Cdelicious,audio%7C1%7Cdelicious,shazam%7C1%7Cdelicious">Post to Delicious</a><div class="shr-count"><div aria-hidden="true" style="left: 9px; top: -10px;" class="shr-count-outline">343</div><div aria-hidden="true" style="left: 10px; top: -10px;" class="shr-count-outline">343</div><div aria-hidden="true" style="left: 11px; top: -10px;" class="shr-count-outline">343</div><div aria-hidden="true" style="left: 9px; top: -11px;" class="shr-count-outline">343</div><div aria-hidden="true" style="left: 11px; top: -11px;" class="shr-count-outline">343</div><div aria-hidden="true" style="left: 9px; top: -12px;" class="shr-count-outline">343</div><div aria-hidden="true" style="left: 10px; top: -12px;" class="shr-count-outline">343</div><div aria-hidden="true" style="left: 11px; top: -12px;" class="shr-count-outline">343</div><div aria-label="Number of times this webpage has been shared" style="left: 10px; top: -11px;" class="shr-count-center">343</div></div></li><li style="margin-left:0px !important;" class="shr-3 shareaholic"><a orig_title="Post to Digg" class="external" target="_blank" rel="nofollow" href="http://www.shareaholic.com/api/share/?title=Creating+Shazam+in+Java&amp;link=http%3A%2F%2Fwww.redcode.nl%2Fblog%2F2010%2F06%2Fcreating-shazam-in-java%2F&amp;notes=A%2520couple%2520of%2520days%2520ago%2520I%2520encountered%2520this%2520article%253A%2520How%2520Shazam%2520Works%250D%250A%250D%250AThis%2520got%2520me%2520interested%2520in%2520how%2520a%2520program%2520like%2520Shazam%2520works...%2520And%2520more%2520importantly%252C%2520how%2520hard%2520is%2520it%2520to%2520program%2520something%2520similar%2520in%2520Java%253F%250D%250A%250D%250A%250D%250AAbout%2520Shazam%250D%250A%250D%250AShazam%2520is%2520an%2520application%2520which%2520you%2520can%2520use%2520to%2520analyse%252Fmatch%2520music.%2520When%2520yo&amp;short_link=&amp;shortener=google&amp;shortener_key=&amp;v=1&amp;apitype=1&amp;apikey=8afa39428933be41f8afdb8ea21a495c&amp;source=Shareaholic-Publishers&amp;template=&amp;service=3&amp;ctype=&amp;tags=java%7C1%7Cdelicious,algorithm%7C1%7Cdelicious,howto%7C1%7Cdelicious,programming%7C1%7Cdelicious,tutorial%7C1%7Cdelicious,music%7C1%7Cdelicious,recognition%7C1%7Cdelicious,algorithms%7C1%7Cdelicious,audio%7C1%7Cdelicious,shazam%7C1%7Cdelicious">Post to Digg</a></li><li style="margin-left:0px !important;" class="shr-38 shareaholic"><a orig_title="Post to StumbleUpon" class="external" target="_blank" rel="nofollow" href="http://www.shareaholic.com/api/share/?title=Creating+Shazam+in+Java&amp;link=http%3A%2F%2Fwww.redcode.nl%2Fblog%2F2010%2F06%2Fcreating-shazam-in-java%2F&amp;notes=A%2520couple%2520of%2520days%2520ago%2520I%2520encountered%2520this%2520article%253A%2520How%2520Shazam%2520Works%250D%250A%250D%250AThis%2520got%2520me%2520interested%2520in%2520how%2520a%2520program%2520like%2520Shazam%2520works...%2520And%2520more%2520importantly%252C%2520how%2520hard%2520is%2520it%2520to%2520program%2520something%2520similar%2520in%2520Java%253F%250D%250A%250D%250A%250D%250AAbout%2520Shazam%250D%250A%250D%250AShazam%2520is%2520an%2520application%2520which%2520you%2520can%2520use%2520to%2520analyse%252Fmatch%2520music.%2520When%2520yo&amp;short_link=&amp;shortener=google&amp;shortener_key=&amp;v=1&amp;apitype=1&amp;apikey=8afa39428933be41f8afdb8ea21a495c&amp;source=Shareaholic-Publishers&amp;template=&amp;service=38&amp;ctype=&amp;tags=java%7C1%7Cdelicious,algorithm%7C1%7Cdelicious,howto%7C1%7Cdelicious,programming%7C1%7Cdelicious,tutorial%7C1%7Cdelicious,music%7C1%7Cdelicious,recognition%7C1%7Cdelicious,algorithms%7C1%7Cdelicious,audio%7C1%7Cdelicious,shazam%7C1%7Cdelicious">Post to StumbleUpon</a></li><li style="margin-left:0px !important;" class="shr-88 shareaholic"><a orig_title="Add to LinkedIn" class="external" target="_blank" rel="nofollow" href="http://www.shareaholic.com/api/share/?title=Creating+Shazam+in+Java&amp;link=http%3A%2F%2Fwww.redcode.nl%2Fblog%2F2010%2F06%2Fcreating-shazam-in-java%2F&amp;notes=A%2520couple%2520of%2520days%2520ago%2520I%2520encountered%2520this%2520article%253A%2520How%2520Shazam%2520Works%250D%250A%250D%250AThis%2520got%2520me%2520interested%2520in%2520how%2520a%2520program%2520like%2520Shazam%2520works...%2520And%2520more%2520importantly%252C%2520how%2520hard%2520is%2520it%2520to%2520program%2520something%2520similar%2520in%2520Java%253F%250D%250A%250D%250A%250D%250AAbout%2520Shazam%250D%250A%250D%250AShazam%2520is%2520an%2520application%2520which%2520you%2520can%2520use%2520to%2520analyse%252Fmatch%2520music.%2520When%2520yo&amp;short_link=&amp;shortener=google&amp;shortener_key=&amp;v=1&amp;apitype=1&amp;apikey=8afa39428933be41f8afdb8ea21a495c&amp;source=Shareaholic-Publishers&amp;template=&amp;service=88&amp;ctype=&amp;tags=java%7C1%7Cdelicious,algorithm%7C1%7Cdelicious,howto%7C1%7Cdelicious,programming%7C1%7Cdelicious,tutorial%7C1%7Cdelicious,music%7C1%7Cdelicious,recognition%7C1%7Cdelicious,algorithms%7C1%7Cdelicious,audio%7C1%7Cdelicious,shazam%7C1%7Cdelicious">Add to LinkedIn</a><div class="shr-count"><div aria-hidden="true" style="left: 9px; top: -10px;" class="shr-count-outline">8</div><div aria-hidden="true" style="left: 10px; top: -10px;" class="shr-count-outline">8</div><div aria-hidden="true" style="left: 11px; top: -10px;" class="shr-count-outline">8</div><div aria-hidden="true" style="left: 9px; top: -11px;" class="shr-count-outline">8</div><div aria-hidden="true" style="left: 11px; top: -11px;" class="shr-count-outline">8</div><div aria-hidden="true" style="left: 9px; top: -12px;" class="shr-count-outline">8</div><div aria-hidden="true" style="left: 10px; top: -12px;" class="shr-count-outline">8</div><div aria-hidden="true" style="left: 11px; top: -12px;" class="shr-count-outline">8</div><div aria-label="Number of times this webpage has been shared" style="left: 10px; top: -11px;" class="shr-count-center">8</div></div></li><li style="margin-left:0px !important;" class="shr-304 shareaholic"><a orig_title="Post to Google+" class="external" target="_blank" rel="nofollow" href="http://www.shareaholic.com/api/share/?title=Creating+Shazam+in+Java&amp;link=http%3A%2F%2Fwww.redcode.nl%2Fblog%2F2010%2F06%2Fcreating-shazam-in-java%2F&amp;notes=A%2520couple%2520of%2520days%2520ago%2520I%2520encountered%2520this%2520article%253A%2520How%2520Shazam%2520Works%250D%250A%250D%250AThis%2520got%2520me%2520interested%2520in%2520how%2520a%2520program%2520like%2520Shazam%2520works...%2520And%2520more%2520importantly%252C%2520how%2520hard%2520is%2520it%2520to%2520program%2520something%2520similar%2520in%2520Java%253F%250D%250A%250D%250A%250D%250AAbout%2520Shazam%250D%250A%250D%250AShazam%2520is%2520an%2520application%2520which%2520you%2520can%2520use%2520to%2520analyse%252Fmatch%2520music.%2520When%2520yo&amp;short_link=&amp;shortener=google&amp;shortener_key=&amp;v=1&amp;apitype=1&amp;apikey=8afa39428933be41f8afdb8ea21a495c&amp;source=Shareaholic-Publishers&amp;template=&amp;service=304&amp;ctype=&amp;tags=java%7C1%7Cdelicious,algorithm%7C1%7Cdelicious,howto%7C1%7Cdelicious,programming%7C1%7Cdelicious,tutorial%7C1%7Cdelicious,music%7C1%7Cdelicious,recognition%7C1%7Cdelicious,algorithms%7C1%7Cdelicious,audio%7C1%7Cdelicious,shazam%7C1%7Cdelicious">Post to Google+</a></li><li style="margin-left:0px !important;" class="shr-7 shareaholic"><a href="http://www.redcode.nl/blog/2010/06/creating-shazam-in-java/&amp;tags=java%7C1%7Cdelicious,algorithm%7C1%7Cdelicious,howto%7C1%7Cdelicious,programming%7C1%7Cdelicious,tutorial%7C1%7Cdelicious,music%7C1%7Cdelicious,recognition%7C1%7Cdelicious,algorithms%7C1%7Cdelicious,audio%7C1%7Cdelicious,shazam%7C1%7Cdelicious" orig_title="Post to Twitter" class="external" target="_blank" rel="nofollow">Post to Twitter</a><div class="shr-count"><div aria-hidden="true" style="left: 9px; top: -10px;" class="shr-count-outline">220</div><div aria-hidden="true" style="left: 10px; top: -10px;" class="shr-count-outline">220</div><div aria-hidden="true" style="left: 11px; top: -10px;" class="shr-count-outline">220</div><div aria-hidden="true" style="left: 9px; top: -11px;" class="shr-count-outline">220</div><div aria-hidden="true" style="left: 11px; top: -11px;" class="shr-count-outline">220</div><div aria-hidden="true" style="left: 9px; top: -12px;" class="shr-count-outline">220</div><div aria-hidden="true" style="left: 10px; top: -12px;" class="shr-count-outline">220</div><div aria-hidden="true" style="left: 11px; top: -12px;" class="shr-count-outline">220</div><div aria-label="Number of times this webpage has been shared" style="left: 10px; top: -11px;" class="shr-count-center">220</div></div></li></ul><style type="text/css">ul.shr-socials li.shareaholic{background-image:url(http://www.redcode.nl/blog/wp-content/uploads/shareaholic/spritegen/sprite.png) !important;}</style></div></div><div class="clear"></div></div><div class="tags"> Tagged with: <a href="http://www.redcode.nl/blog/tag/algorithm/" rel="tag">algorithm</a> • <a href="http://www.redcode.nl/blog/tag/music-matching/" rel="tag">music matching</a> • <a href="http://www.redcode.nl/blog/tag/shazam/" rel="tag">shazam</a><br>&nbsp;</div></div></div><div class="clear"></div></div></div><div id="pl_comments" class="copy fix"><div class="copy-pad"><div id="comments"><h3 id="comments-title">285 Responses to <em>Creating Shazam in Java</em></h3><ol class="commentlist"><li class="comment even thread-even depth-1" id="comment-4282"><div id="div-comment-4282" class="comment-body"><div class="comment-author vcard"> <img alt="" src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/221e32e8d793c7ec033887cbd63e597d.png" class="avatar avatar-45 photo" height="45" width="45"><cite class="fn">Pavan</cite> <span class="says">says:</span></div><div class="comment-meta commentmetadata"><a href="http://www.redcode.nl/blog/2010/06/creating-shazam-in-java/comment-page-15/#comment-4282"> June 17, 2012 at 07:30</a></div><p>Hi,</p><p>Thanks for the great blog post, I am unable to plot the frequency spectrum properly.<br> Can you please inform me what the BlockSizeX and size mean in the plotting code snippet.<br> If you can share the code, it will be great. Thanks,</p><p>Pavan<br> <a href="mailto:pavan.vishu@gmail.com">pavan.vishu@gmail.com</a></p><div class="reply"></div></div></li><li class="comment odd alt thread-odd thread-alt depth-1" id="comment-4284"><div id="div-comment-4284" class="comment-body"><div class="comment-author vcard"> <img alt="" src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/a1a7b928820c0ed514f0959497b9243a.png" class="avatar avatar-45 photo" height="45" width="45"><cite class="fn">mike</cite> <span class="says">says:</span></div><div class="comment-meta commentmetadata"><a href="http://www.redcode.nl/blog/2010/06/creating-shazam-in-java/comment-page-15/#comment-4284"> June 21, 2012 at 15:18</a></div><p>what is HARVESTER variable? where have i to declare it? :S</p><div class="reply"></div></div></li><li class="comment even thread-even depth-1" id="comment-4286"><div id="div-comment-4286" class="comment-body"><div class="comment-author vcard"> <img alt="" src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/fdd49c2310be1ef3a4f7c1a61f579498.png" class="avatar avatar-45 photo" height="45" width="45"><cite class="fn">Gary</cite> <span class="says">says:</span></div><div class="comment-meta commentmetadata"><a href="http://www.redcode.nl/blog/2010/06/creating-shazam-in-java/comment-page-15/#comment-4286"> June 24, 2012 at 17:30</a></div><p>I’m
 not quite understanding how they are attacking you for this, or how 
they even got a patent on such a vague algorithm. Essentially aren’t you
 just using a database/hashtable for exactly what it was designed for: 
populating with values, and looking them up? As far as the FFT and 
frequency fingerprinting, isn’t this simply the only logical way to go 
about finding usable patterns within an audio stream? Not only this, but
 you didn’t even intend to make any money off of this… you’re just 
educating. I’m really interested in getting more information on this, 
but keep up the good fight partner! I support you all the way…</p><div class="reply"></div></div></li><li class="comment odd alt thread-odd thread-alt depth-1" id="comment-4287"><div id="div-comment-4287" class="comment-body"><div class="comment-author vcard"> <img alt="" src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/2b07b176ebe2e4dd6b57b28394e884a4.jpg" class="avatar avatar-45 photo" height="45" width="45"><cite class="fn">baba tenor</cite> <span class="says">says:</span></div><div class="comment-meta commentmetadata"><a href="http://www.redcode.nl/blog/2010/06/creating-shazam-in-java/comment-page-15/#comment-4287"> June 30, 2012 at 00:44</a></div><p>Arthur, there is a problem though. I do not know if you plan to dwell more on this code but here is a pointer for you.</p><p>With
 your current algorithm, it looks like you will always have a false 
positive. Did you ever try recording songs that are not in the database?
 They will always return something in the database, even if it has the 
maximum offset.</p><p>That’s what I am working on right now. If you have an idea, I would be glad to do some brainstorming on it. ;)</p><div class="reply"></div></div></li><li class="comment even thread-even depth-1" id="comment-4290"><div id="div-comment-4290" class="comment-body"><div class="comment-author vcard"> <img alt="" src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/cd10da3190553603b86c830cc932db5d.png" class="avatar avatar-45 photo" height="45" width="45"><cite class="fn">perrinos</cite> <span class="says">says:</span></div><div class="comment-meta commentmetadata"><a href="http://www.redcode.nl/blog/2010/06/creating-shazam-in-java/comment-page-15/#comment-4290"> July 7, 2012 at 14:08</a></div><p>Hi roy,<br> I’d like to try but, some source parts are missing…<br> Could you mail me your source ? <a href="mailto:thierry.hosy@gmail.com">thierry.hosy@gmail.com</a><br> Or i can mail to you mine to show you my errors ?<br> That would be very nice…<br> Cheers,<br> perrin</p><div class="reply"></div></div></li></ol><div class="navigation"><div class="alignleft"><a href="http://www.redcode.nl/blog/2010/06/creating-shazam-in-java/comment-page-14/#comments"><span class="meta-nav">←</span> Older Comments</a></div><div class="alignright"></div></div><div id="respond"><h3 id="reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="http://www.redcode.nl/blog/2010/06/creating-shazam-in-java/#respond" style="display: none;">Cancel reply</a></small></h3><form action="http://www.redcode.nl/blog/wp-comments-post.php" method="post" id="commentform"><p class="comment-notes">Your email address will not be published. Required fields are marked <span class="required">*</span></p><p class="comment-form-author"><label for="author">Name</label> <span class="required">*</span><input id="author" name="author" size="30" aria-required="true" type="text"></p><p class="comment-form-email"><label for="email">Email</label> <span class="required">*</span><input id="email" name="email" size="30" aria-required="true" type="text"></p><p class="comment-form-url"><label for="url">Website</label><input id="url" name="url" size="30" type="text"></p><p class="comment-form-comment"><label for="comment">Comment</label><textarea id="comment" name="comment" cols="45" rows="8" aria-required="true"></textarea></p><p class="form-allowed-tags">You may use these <abbr title="HyperText Markup Language">HTML</abbr> tags and attributes: <code>&lt;a
 href="" title="" rel=""&gt; &lt;abbr title=""&gt; &lt;acronym 
title=""&gt; &lt;b&gt; &lt;blockquote cite=""&gt; &lt;cite&gt; 
&lt;code&gt; &lt;del datetime=""&gt; &lt;em&gt; &lt;i&gt; &lt;q 
cite=""&gt; &lt;strike&gt; &lt;strong&gt; </code></p><p class="form-submit"> <input name="submit" id="submit" value="Post Comment" type="submit"> <input name="comment_post_ID" value="391" id="comment_post_ID" type="hidden"> <input name="comment_parent" id="comment_parent" value="0" type="hidden"></p><p id="gasp_p" style="clear:both;"><input style="width: 25px;" name="gasp_checkbox" id="gasp_checkbox" type="checkbox"> Confirm you are not a spambot</p><script type="text/javascript">var gasp_p=document.getElementById("gasp_p");var gasp_cb=document.createElement("input");var gasp_text=document.createTextNode(" Confirm you are not a spambot");gasp_cb.type="checkbox";gasp_cb.id="gasp_checkbox";gasp_cb.name="gasp_checkbox";gasp_cb.style.width="25px";gasp_p.appendChild(gasp_cb);gasp_p.appendChild(gasp_text);var frm=gasp_cb.form;frm.onsubmit=gasp_it;function gasp_it(){if(gasp_cb.checked!=true){alert("Please check the box to confirm that you are NOT a spammer");return false;}
return true;}</script><input id="gasp_email" name="gasp_email" value="" type="hidden"><p style="display: none;"><input id="akismet_comment_nonce" name="akismet_comment_nonce" value="615eb28230" type="hidden"></p></form></div><script type="text/javascript">jQuery(document).ready(function(){jQuery('#commentform').submit(function(){_gaq.push(['_setAccount','UA-3219266-1'],['_trackEvent','comment','submit']);});});</script></div><div class="clear"></div></div></div><div id="pagination" class="copy fix"><div class="copy-pad"><div class="clear"></div></div></div></div></div></div><div id="sidebar-wrap" class="fix"><div id="sidebar1" class="scolumn fix"><div class="scolumn-pad"><div id="sidebar_primary" class="copy fix"><div class="copy-pad"><ul id="list_sidebar_primary" class="sidebar_widgets fix"><li id="twitter-1" class="widget_twitter widget fix"><div class="widget-pad"><h3 class="widget-title"><a href="http://twitter.com/royvanrijn" class="twitter_title_link">Latest tweet</a></h3><ul class="twitter"><li class="twitter-item"> <a href="http://twitter.com/ChezHJ" class="twitter-user">@ChezHJ</a> <a href="http://twitter.com/zuzudesignNL" class="twitter-user">@zuzudesignNL</a> we moeten toch eerst nieuwe briefjes maken met z'n allen! <a href="http://twitter.com/#search?q=bijnaallesisalweeraf" class="twitter-link">#bijnaallesisalweeraf</a></li></ul></div></li><li id="linkcat-2" class="widget_links widget fix"><div class="widget-pad"><h3 class="widget-title">Links</h3><ul class="xoxo blogroll"><li><a href="http://www.azspcs.net/" title="Al Zimmermann">AZsPCs</a></li><li><a href="http://www.koth.org/" title="Corewars">koth.org</a></li><li><a href="http://retroprogramming.com/" title="Retro Programming">Retro Programming</a></li></ul></div></li><li id="archives-4" class="widget_archive widget fix"><div class="widget-pad"><h3 class="widget-title">Archives</h3> <select name="archive-dropdown" onchange="document.location.href=this.options[this.selectedIndex].value;"><option selected="selected" value="">Select Month</option><option value="http://www.redcode.nl/blog/2012/07/"> July 2012 &nbsp;(4)</option><option value="http://www.redcode.nl/blog/2012/06/"> June 2012 &nbsp;(2)</option><option value="http://www.redcode.nl/blog/2012/05/"> May 2012 &nbsp;(1)</option><option value="http://www.redcode.nl/blog/2012/04/"> April 2012 &nbsp;(1)</option><option value="http://www.redcode.nl/blog/2012/03/"> March 2012 &nbsp;(3)</option><option value="http://www.redcode.nl/blog/2012/02/"> February 2012 &nbsp;(1)</option><option value="http://www.redcode.nl/blog/2011/12/"> December 2011 &nbsp;(6)</option><option value="http://www.redcode.nl/blog/2011/11/"> November 2011 &nbsp;(2)</option><option value="http://www.redcode.nl/blog/2011/10/"> October 2011 &nbsp;(4)</option><option value="http://www.redcode.nl/blog/2011/08/"> August 2011 &nbsp;(1)</option><option value="http://www.redcode.nl/blog/2011/05/"> May 2011 &nbsp;(6)</option><option value="http://www.redcode.nl/blog/2011/04/"> April 2011 &nbsp;(4)</option><option value="http://www.redcode.nl/blog/2011/02/"> February 2011 &nbsp;(3)</option><option value="http://www.redcode.nl/blog/2011/01/"> January 2011 &nbsp;(2)</option><option value="http://www.redcode.nl/blog/2010/12/"> December 2010 &nbsp;(1)</option><option value="http://www.redcode.nl/blog/2010/11/"> November 2010 &nbsp;(2)</option><option value="http://www.redcode.nl/blog/2010/09/"> September 2010 &nbsp;(5)</option><option value="http://www.redcode.nl/blog/2010/07/"> July 2010 &nbsp;(2)</option><option value="http://www.redcode.nl/blog/2010/06/"> June 2010 &nbsp;(2)</option><option value="http://www.redcode.nl/blog/2010/04/"> April 2010 &nbsp;(2)</option><option value="http://www.redcode.nl/blog/2010/02/"> February 2010 &nbsp;(2)</option><option value="http://www.redcode.nl/blog/2010/01/"> January 2010 &nbsp;(8)</option><option value="http://www.redcode.nl/blog/2009/12/"> December 2009 &nbsp;(18)</option> </select></div></li><li id="text-3" class="widget_text widget fix"><div class="widget-pad"><div class="textwidget"><p> <img src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/sidebar1.jpg" alt="That's me!"></p></div></div></li></ul><div class="clear"></div></div></div></div></div></div></div><div class="clear"></div></div></div></div></div></div><div id="morefoot_area"></div><div class="clear"></div></div></div></div><div id="footer"><div class="outline fix"><div id="cred" class="pagelines"><a class="plimage" target="_blank" href="http://www.pagelines.com/" title="PageLines"><img src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/pagelines.png" alt="Platform by PageLines"></a></div><div class="clear"></div></div></div></div><script type="text/javascript">var SHRSB_Settings={"shr-publisher-391":{"link":"http:\/\/www.redcode.nl\/blog\/2010\/06\/creating-shazam-in-java\/","shortener":"google","title":"Creating Shazam in Java","notes":"A%20couple%20of%20days%20ago%20I%20encountered%20this%20article%3A%20How%20Shazam%20Works%0D%0A%0D%0AThis%20got%20me%20interested%20in%20how%20a%20program%20like%20Shazam%20works...%20And%20more%20importantly%2C%20how%20hard%20is%20it%20to%20program%20something%20similar%20in%20Java%3F%0D%0A%0D%0A%0D%0AAbout%20Shazam%0D%0A%0D%0AShazam%20is%20an%20application%20which%20you%20can%20use%20to%20analyse%2Fmatch%20music.%20When%20yo","service":"61,102,40,5,202,2,3,38,88,304,7","apikey":"8afa39428933be41f8afdb8ea21a495c","expand":"false","src":"http:\/\/www.redcode.nl\/blog\/wp-content\/uploads\/shareaholic\/spritegen","localize":true,"share_src":"http:\/\/www.shareaholic.com","rel":"nofollow","target":"_blank","center":true,"twitter_template":"%24%7Btitle%7D+-+%24%7Bshort_link%7D+via+%40royvanrijn","mode":"inject","designer_toolTips":"1","tip_bg_color":"#ffffff","tip_text_color":"#212121"}};</script>
<iframe style="display: none;" src="Creating%20Shazam%20in%20Java%20%7C%20Redcode_files/a.html" id="shr_oven"></iframe></body></html>
<!-- Performance optimized by W3 Total Cache. Learn more: http://www.w3-edge.com/wordpress-plugins/

Minified using disk: basic
Page Caching using disk: enhanced

Served from: www.redcode.nl @ 2012-07-27 04:31:29 -->